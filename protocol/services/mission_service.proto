// SPDX-FileCopyrightText: 2025 Carnegie Mellon University - LivingEdgeLab
//
// SPDX-License-Identifier: GPL-2.0-only

syntax = "proto3";
package protocol.services.mission_service;

import "common.proto";
import "google/protobuf/any.proto";

/*
 * Used to start a new mission or stop an active mission
 */
service Mission {
  // Upload a mission for execution
  rpc Upload (UploadRequest) returns (UploadResponse) {}
  // Start an uploaded mission
  rpc Start (StartRequest) returns (StartResponse) {}
  // Stop the current mission
  rpc Stop (StopRequest) returns (StopResponse) {}
  // Send a notification to the current mission
  rpc Notify (NotifyRequest) returns (NotifyResponse) {}
  // Set the mission telemetry stream parameters
  rpc ConfigureTelemetryStream (ConfigureTelemetryStreamRequest) returns (ConfigureTelemetryStreamResponse) {}
}

message MissionData {
  string uri = 1; // URI, either local or remote, of a mission file
}

message UploadRequest {
  protocol.common.Request request = 1;
  MissionData mission = 2; // Data of the target mission
}

message UploadResponse {
  protocol.common.Response response = 1;
}

message StartRequest {
  protocol.common.Request request = 1;
}

message StartResponse {
  protocol.common.Response response = 1;
}

message StopRequest {
  protocol.common.Request request = 1;
}

message StopResponse {
  protocol.common.Response response = 1;
}

message NotifyRequest {
  protocol.common.Request request = 1;
  int32 notify_code = 2; // Integer notification code, generated by the backend 
  google.protobuf.Any notify_data = 3; // Extra data about notification
}

message NotifyResponse {
  protocol.common.Response response = 1;
}

message ConfigureTelemetryStreamRequest {
  protocol.common.Request request = 1;
  uint32 frequency = 2; // Target frequency for telemetry stream
}

message ConfigureTelemetryStreamResponse {
  protocol.common.Response response = 1;
}
