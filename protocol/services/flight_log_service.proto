// SPDX-FileCopyrightText: 2025 Carnegie Mellon University - LivingEdgeLab
//
// SPDX-License-Identifier: GPL-2.0-only

syntax = "proto3";
package steeleagle.protocol.services.flight_log_service;

import "common.proto";

/*
 * Used to log to a flight log
 */
service FlightLog {
  // Basic log endpoint 
  rpc Log (LogRequest)
	returns (steeleagle.protocol.common.Response) {}
  // Log a request/response proto
  rpc LogProto (LogProtoRequest)
	returns (steeleagle.protocol.common.Response) {}
}

message LogRequest {
  steeleagle.protocol.common.Request request = 1;
  string topic = 2;
  LogMessage log = 3;
}

enum LogType {
  DEBUG = 0;
  INFO = 1;
  PROTO = 2;
  WARNING = 3;
  ERROR = 4;
  CRITICAL = 5;
}

message LogMessage {
  LogType type = 1;
  string msg = 2;
}

message ReqRepProto {
  oneof type {
    steeleagle.protocol.common.Request request = 1;
    steeleagle.protocol.common.Response response = 2;
  }
  // Name of the request and associated service
  string name = 3;
  // Plaintext representation of the proto contents
  string content = 4;
}

message LogProtoRequest {
  steeleagle.protocol.common.Request request = 1;
  string topic = 2;
  ReqRepProto reqrep_proto = 3; 
}
